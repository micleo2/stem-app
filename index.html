<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="https://bootswatch.com/spacelab/bootstrap.min.css">
    <title>Program Running Stats</title>
  </head>
  <body>
  <nav class="navbar navbar-default">
	  <div class="container-fluid">
		<div class="navbar-header">
		  <a class="navbar-brand" href="#">WebSiteName</a>
		</div>
		<ul class="nav navbar-nav">
		  <li class="active"><a href="#">Home</a></li>
		  <li><a href="#">Page 1</a></li>
		  <li><a href="#">Page 2</a></li>
		  <li><a href="#">Page 3</a></li>
		</ul>
	  </div>
  </nav>
  <h1 class="text-center"> <u>Main Table for Program</u></h1>
  <table class="table table-striped table-hover ">
  <div class = "container">
	  <thead>
		<tr>
		  <th>#</th>
		  <th>Log</th>
		</tr>
	  </thead>
		  <tbody id="programinfo">
			<tr class="info">
			  <td>3</td>
			  <td>Column content</td>
			</tr>
			<tr class="success">
			  <td>4</td>
			  <td>Column content</td>
			</tr>
		  </tbody>
	  </table>
	</div>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var socket = io();
      socket.on('program-update', function(msg){
		newLog(msg);
		console.log("program updated!" + msg);
      });
	  
	  socket.on("catch-up", function(pastLogs){
		for (var i = 0; i < pastLogs.length; i++){
			newLog(pastLogs[i]);
		}
	  });
	  
	  function newLog(msg){
	    var tableBdy = document.getElementById("programinfo");
	    var tRow = document.createElement("tr");
		tRow.className = "info";
		var iterationCount = document.createElement("td");
		$(iterationCount).html("3");
		var messageTD = document.createElement("td");
		$(messageTD).html(msg);
		tRow.appendChild(iterationCount);
		tRow.appendChild(messageTD);
		tableBdy.appendChild(tRow);
	  }
    </script>
  </body>
</html>
